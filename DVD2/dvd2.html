<!DOCTYPE html>
<html>
<head>
    <title>DVD Bounce</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        canvas {
            background-color: #000;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const context = canvas.getContext('2d');

        function handleResize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        handleResize();
        window.addEventListener('resize', handleResize);

        const IMAGE_SIZE = 150;
        const SPEED = 2;
        const imageInstances = [];

        function addImageInstance(x, y) {
            const dx = SPEED;
            const dy = SPEED;
            imageInstances.push({ x, y, width: IMAGE_SIZE, height: IMAGE_SIZE, dx, dy });
        }

        // Add initial image instance in the middle of the canvas
        addImageInstance(window.innerWidth / 2 - IMAGE_SIZE / 2, window.innerHeight / 2 - IMAGE_SIZE / 2);

        function removeImageInstance(index) {
            imageInstances.splice(index, 1);
        }

        const logo = new Image();
        logo.src = 'https://raw.githubusercontent.com/Ev-Bro/dvd/main/dvd.png';

        function gameLoop() {
            context.clearRect(0, 0, canvas.width, canvas.height);

            for (const instance of imageInstances) {
                instance.x += instance.dx;
                instance.y += instance.dy;

                if (instance.x < 0 || instance.x + instance.width > canvas.width) {
                    instance.dx = -instance.dx;
                }

                if (instance.y < 0 || instance.y + instance.height > canvas.height) {
                    instance.dy = -instance.dy;
                }

                context.drawImage(logo, instance.x, instance.y, instance.width, instance.height);
            }

            requestAnimationFrame(gameLoop);
        }

        function handleEvent(event) {
            const touchX = event.clientX || event.touches[0].clientX;
            const touchY = event.clientY || event.touches[0].clientY;

            let shouldRemove = false;

            for (let i = 0; i < imageInstances.length; i++) {
                const instance = imageInstances[i];

                if (
                    touchX >= instance.x &&
                    touchX <= instance.x + instance.width &&
                    touchY >= instance.y &&
                    touchY <= instance.y + instance.height
                ) {
                    shouldRemove = true;
                    removeImageInstance(i);
                    break;
                }
            }

            if (!shouldRemove) {
                addImageInstance(touchX - IMAGE_SIZE / 2, touchY - IMAGE_SIZE / 2);
            }
        }

        canvas.addEventListener('touchstart', handleEvent);
        canvas.addEventListener('mousedown', handleEvent);

        gameLoop();
    </script>
</body>
</html>
